# Compilling energy peer to peer trading layer 2 configuration

Note: All folders mentioned here are relative to the folder ``` UEI/layer2/EV-charging/3.1/ ```

API Specific components(rules for specific APIs) are defined under the folder

```
example-rules/<requests/respnses>/<API NAME>/
```

Reusable components(rules that are shared by more than one APIs) are defined under the folder

```
example-rules/shared-rules/
```

Example requests and responses for specific APIs are defined under the folder

```
example-jsons/<requests/respnses>/<API NAME>/
```

Template file which defines the specifications for energy peer to peer trade use case and imports the example-rules and examle-jsons into the specification.
```
template_energy_EV_1.1.0_openapi_3.1.yaml
```

Specification file where the compiled Layer 2 configuration is saved. This is an autogenerated file created by compiling the set of components listed above.
```
energy_EV_1.1.0_openapi_3.1
```

## Steps to compile the layer 2 specification from the template file:

### Install Swagger CLI
Swagger CLI is needed to compile the final specification file. Install the swagger command line tool using npm (Note: you may need to use root privileges if installing it globally)

```
sudo npm install -g swagger-cli
```

### Use the Swagger CLI to compile the template into a final specification yaml
1. Go to the home of this folder ``` UEI/layer2/EV-charging/3.1 ```
2. Run the Swagger CLI command. Command format is:
```
swagger-cli bundle <input-file-path> --outfile <output-file-path> --type yaml
```
&nbsp;&nbsp;&nbsp;&nbsp;For example
```
swagger-cli bundle template_energy_EV_1.1.0_openapi_3.1.yaml --outfile energy_EV_1.1.0_openapi_3.1.yaml --type yaml
```
3. If the command runs successfully, you should see an output like this.
```
Created energy_EV_1.1.0_openapi_3.1.yaml from template_energy_EV_1.1.0_openapi_3.1.yaml
```
&nbsp;&nbsp;&nbsp;&nbsp;The output file will have the final layer 2 configuration.
